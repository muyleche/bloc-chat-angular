<main class="chatroom sidebar-space">
  <h1>{{room.name}}</h1>
  <div class="loading" ng-hide="messages.$resolved"></div>
  <article class="chatroom-message" ng-show="messages.$resolved" ng-repeat="msg in messages | orderBy:'dateSubmitted'">
    <table>
      <tr>
        <td class="post-info">
          <img class="author-thumbnail" ng-src="{{UserDataService.get(msg.author).photoURL || '/assets/images/profile-default.png'}}" alt="Author picture" />
          <p class="author-label">{{UserDataService.get(msg.author, 'displayName') || UserDataService.get(msg.author, 'email')}}</p>
          <p class="date-label">{{msg.dateSubmitted | date:"MMM dd - hh:mm a"}}</p>
        </td>
        <td class="message-wrapper">
          <p>{{msg.text}}</p>
        </td>
      </tr>
    </table>
  </article>
  <div ng-hide="UserService.currentUser">Log in or sign up to contribute to the discussion.</div>
  <div ng-show="UserService.currentUser && (!messages || !messages.$resolved || !messages.allowed)">You do not have permission to access this chatroom.</div>
  <form name="new-post-form" ng-show="UserService.currentUser && messages.allowed">
    <textarea rows="3" cols="75" class="" placeholder="Share your thoughts..." ng-model="newMessage.text" ></textarea>
    <input type="submit" class="submit-new-post btn btn-blue s-b-s" ng-click="MessageService.add($event, newMessage, room, UserService.currentUser)" value="Post"/>
  </form>
</main>
